const intlLanguage = "Asia/Calcutta" === Intl.DateTimeFormat().resolvedOptions().timeZone ? "en-IN" : "en-US";

function unitChanged(e, t) {
    const c = document.getElementById("qty1").value,
        a = document.getElementById("price1").value,
        n = document.getElementById("qty2").value,
        l = document.getElementById("price2").value;
    "" != c && "" != a && "" != n && "" != l && getAverage(), "" == document.getElementById(e).value ? document.getElementById(t).innerHTML = "Field is Required" : document.getElementById(t).innerHTML = ""
}

function getAverage() {
    console.log("qty1 ==>",document.getElementById("qty1").value)
    console.log("price1 ==>",document.getElementById("price1").value)
    console.log("qty2 ==>",document.getElementById("qty2").value)
    console.log("price2 ==>",document.getElementById("price2").value)
    if ("" != document.getElementById("qty1").value)
        if ("" != document.getElementById("price1").value)
            if ("" != document.getElementById("qty2").value)
                if ("" != document.getElementById("price2").value) {
                    var e = document.getElementById("qty1").value,
                        t = document.getElementById("price1").value,
                        c = document.getElementById("qty2").value,
                        a = document.getElementById("price2").value,
                        n = Number((e * t + c * a).toFixed(2)),
                        l = +e + +c,
                        d = Number(((e * t + c * a) / l).toFixed(2));
                    document.getElementById("investedamount1").innerHTML = "<span>Amount invested in the 1st purchase: </span>  <span class='qty-amount'>" + (e * t).toLocaleString(intlLanguage) + "</span>", document.getElementById("investedamount2").innerHTML = "<span>Amount invested in the 2nd purchase: </span> <span class='qty-amount'>" + (c * a).toLocaleString(intlLanguage) + "</span>", document.getElementById("result").innerHTML = "<span>Total Quanity: </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<bold>" + l + "</bold><br/><br/><span>Average Price:</span> &nbsp;&nbsp;&nbsp;<bold>" +"₹"+ d.toLocaleString(intlLanguage) + "</bold><br/><br/><span>Total Amount:</span> &nbsp;&nbsp;&nbsp;<bold>" +"₹"+ n.toLocaleString(intlLanguage) + "</bold>"
                } else document.getElementById("error4").innerHTML = "Price required";
    else document.getElementById("error3").innerHTML = "Quantity required";
    else document.getElementById("error2").innerHTML = "Price required";
    else document.getElementById("error1").innerHTML = "Quantity required"
}

function clearFields() {
    document.getElementById("qty1").value = "", document.getElementById("price1").value = "", document.getElementById("qty2").value = "", document.getElementById("price2").value = "", document.getElementById("result").innerHTML = "", document.getElementById("investedamount1").innerHTML = "", document.getElementById("investedamount2").innerHTML = ""
}
var links = document.querySelectorAll(".link");

function activeSection(e) {
    switch (e) {
        case "ac":
            document.getElementById("average-calculator").classList.remove("hide"), document.getElementById("average-calculator").classList.add("active"), document.getElementById("buy-me-a-coffee").classList.remove("active"), document.getElementById("buy-me-a-coffee").classList.add("hide"), document.getElementById("ac").classList.add("active"), document.getElementById("sc").classList.remove("active"), document.getElementById("pc").classList.remove("active"), document.getElementById("em").classList.remove("active"), document.getElementById("cagr").classList.remove("active"), document.getElementById("swp").classList.remove("active"), document.getElementById("buymeacoffee").classList.remove("active");
        break;
        case "buymeacoffee":
            document.getElementById("buy-me-a-coffee").classList.add("active"), document.getElementById("buy-me-a-coffee").classList.remove("hide"), document.getElementById("sip-calculator").classList.remove("active"), document.getElementById("sip-calculator").classList.add("hide"), document.getElementById("average-calculator").classList.remove("active"), document.getElementById("average-calculator").classList.add("hide"), document.getElementById("percentage-calculator").classList.remove("active"), document.getElementById("percentage-calculator").classList.add("hide"), document.getElementById("emi-calculator").classList.remove("active"), document.getElementById("emi-calculator").classList.add("hide"), document.getElementById("cagr-calculator").classList.remove("active"), document.getElementById("cagr-calculator").classList.add("hide"), document.getElementById("swp-calculator").classList.remove("active"), document.getElementById("swp-calculator").classList.add("hide"), document.getElementById("buymeacoffee").classList.add("active"), document.getElementById("em").classList.remove("active"), document.getElementById("ac").classList.remove("active"), document.getElementById("sc").classList.remove("active"), document.getElementById("pc").classList.remove("active"), document.getElementById("cagr").classList.remove("active"), document.getElementById("swp").classList.remove("active")
    }(isMobile() || window.innerWidth < 768) && (document.getElementById("sidebar").style.left = "-500px")
}

function updateClock() {
    var e = new Date,
        t = e.getHours(),
        c = e.getMinutes(),
        a = e.getSeconds(),
        n = t >= 12 ? "PM" : "AM",
        l = (t = (t = t % 12 || 12) < 10 ? "0" + t : t) + ":" + (c = c < 10 ? "0" + c : c) + ":" + (a = a < 10 ? "0" + a : a) + " " + n;
    document.getElementById("clock") && (document.getElementById("clock").innerText = l)
}

function isMobile() {
    return /Android|webOS|iPhone|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)
}

function toggleDarkMode() {
    const e = document.querySelector("body");
    e.classList.toggle("dark-mode");
    const t = e.classList.contains("dark-mode");
    localStorage.setItem("darkMode", t)
}
links.forEach((function(e) {
    e.addEventListener("click", (function(e) {
        e.preventDefault(), console.log("Anchor link clicked, but default routing prevented.")
    }))
})), setInterval(updateClock, 1e3), document.getElementById("toggle-btn").addEventListener("click", (function() {
    var e = document.getElementById("sidebar");
    "0px" != e.style.left ? e.style.left = "0px" : e.style.left = "-500px"
}));
const savedDarkMode = localStorage.getItem("darkMode");

function openPhonePe() {
    window.location.href = "phonepe://pay?pa=9008182348@ybl"
}

function copyToClipboard(e) {
    navigator.clipboard.writeText(e).then((() => {
        console.log("Text copied to clipboard: " + e)
    })).catch((e => {
        console.error("Unable to copy text to clipboard: ", e)
    }))
}
"true" === savedDarkMode && (document.querySelector("body").classList.add("dark-mode"), document.getElementById("darkModeSwitch").checked = !0), document.getElementById("darkModeSwitch") && document.getElementById("darkModeSwitch").addEventListener("change", toggleDarkMode);